<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aplicación Eatfit</title>
  <style>
    :root {
      --bg: #0f1724;
      --accent: #7b1f3a;
      --accent-2: #ff6b3d;
      --muted: #9aa4b2;
      --card: #0b1220;
      --radius: 16px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: "Inter", system-ui, sans-serif; background: var(--bg); color: #fff; line-height: 1.5; min-height: 100vh; }

    /* Menú */
    nav { display: flex; justify-content: center; gap: 20px; background: var(--card); padding: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.4); position: sticky; top: 0; z-index: 100; }
    nav a { color: var(--muted); font-weight: 600; text-decoration: none; padding: 8px 16px; border-radius: var(--radius); transition: 0.2s; }
    nav a:hover, nav a.active { background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: #fff; }

    /* Contenedor de secciones */
    .section { display: none; padding: 40px 20px; max-width: 800px; margin: auto; }
    .section.active { display: block; }

    h1 { font-size: clamp(32px, 4vw, 56px); color: var(--accent-2); margin-bottom: 20px; text-align: center; }

    /* Botones y tarjetas: reutilizables de mural y alimentos */
    button { background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: #fff; padding: 12px; border: none; border-radius: var(--radius); font-weight: 600; cursor: pointer; transition: transform 0.2s; }
    button:hover { transform: translateY(-2px); }

    .card { background: var(--card); padding: 16px; margin-bottom: 16px; border-radius: var(--radius); box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
    .card h3 { color: var(--accent-2); margin-bottom: 8px; }
    .card p { color: var(--muted); font-size: 0.95rem; line-height: 1.4; margin: 2px 0; }

    /* Formularios */
    form { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
    input, textarea { width: 100%; padding: 12px; border-radius: var(--radius); border: 1px solid #333; background: #1b2434; color: #fff; font-size: 1rem; }
    input:focus, textarea:focus { border-color: var(--accent); outline: none; }

    /* Animación */
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
    .fade-in { opacity: 0; transform: translateY(20px); animation: fadeInUp 0.5s forwards; }
  </style>
</head>
<body>

  <!-- Menú -->
  <nav>
    <a href="#" class="nav-link active" data-target="mural">Mural de Comentarios</a>
    <a href="#" class="nav-link" data-target="alimentos">Información de Alimentos</a>
  </nav>

  <!-- Secciones -->
  <section id="mural" class="section active">
    <h1>Mural de Comentarios</h1>
    <form id="comment-form">
      <input type="text" id="userName" placeholder="Tu nombre" required>
      <textarea id="commentText" placeholder="Escribe tu comentario..." required></textarea>
      <button type="submit">Enviar</button>
    </form>
    <div id="comments-container"></div>
  </section>

  <section id="alimentos" class="section">
    <h1>Información de Alimentos</h1>
    <form id="food-form">
      <input type="text" id="foodQuery" placeholder="Nombre del alimento" required>
      <button type="submit">Buscar</button>
    </form>
    <div id="food-results"></div>
    <div id="daily-summary" class="card">
      <h3>Resumen Diario</h3>
      <p>Calorías: <span id="total-cal">0</span> kcal</p>
      <p>Proteínas: <span id="total-protein">0</span> g</p>
      <p>Grasas: <span id="total-fat">0</span> g</p>
      <p>Carbohidratos: <span id="total-carb">0</span> g</p>
    </div>
  </section>

  <script>
    // Navegación entre secciones
    const links = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.section');
    links.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        links.forEach(l => l.classList.remove('active'));
        sections.forEach(s => s.classList.remove('active'));
        link.classList.add('active');
        document.getElementById(link.dataset.target).classList.add('active');
      });
    });

    // Mural
    const form = document.getElementById('comment-form');
    const commentsContainer = document.getElementById('comments-container');
    form.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('userName').value.trim();
      const text = document.getElementById('commentText').value.trim();
      if(!name || !text) return;
      const commentCard = document.createElement('div');
      commentCard.classList.add('card', 'fade-in');
      commentCard.innerHTML = `<h3>${name}</h3><p>${text}</p>`;
      commentsContainer.prepend(commentCard);
      form.reset();
    });

    // Alimentos y resumen
    const foodForm = document.getElementById('food-form');
    const foodResults = document.getElementById('food-results');
    let dailySummary = {cal: 0, protein: 0, fat: 0, carb: 0};
    function updateSummary() {
      document.getElementById('total-cal').textContent = dailySummary.cal;
      document.getElementById('total-protein').textContent = dailySummary.protein;
      document.getElementById('total-fat').textContent = dailySummary.fat;
      document.getElementById('total-carb').textContent = dailySummary.carb;
    }
    foodForm.addEventListener('submit', async e => {
      e.preventDefault();
      const query = document.getElementById('foodQuery').value.trim();
      if(!query) return;
      foodResults.innerHTML = 'Buscando...';
      try {
        const res = await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(query)}&search_simple=1&action=process&json=1`);
        const data = await res.json();
        if(data.products.length === 0) { foodResults.innerHTML = '<p>No se encontraron resultados.</p>'; return; }
        foodResults.innerHTML = '';
        data.products.slice(0,5).forEach(product => {
          const card = document.createElement('div');
          card.classList.add('card', 'fade-in');
          const calories = product.nutriments?.energy_kcal || 0;
          const protein = product.nutriments?.proteins || 0;
          const fat = product.nutriments?.fat || 0;
          const carb = product.nutriments?.carbohydrates || 0;
          card.innerHTML = `
            <div>
              <h3>${product.product_name || 'Sin nombre'}</h3>
              <p>Calorías: ${calories} kcal</p>
              <p>Proteínas: ${protein} g</p>
              <p>Grasas: ${fat} g</p>
              <p>Carbohidratos: ${carb} g</p>
            </div>
            <button class="add-btn">Agregar</button>
          `;
          card.querySelector('.add-btn').addEventListener('click', () => {
            dailySummary.cal += calories;
            dailySummary.protein += protein;
            dailySummary.fat += fat;
            dailySummary.carb += carb;
            updateSummary();
          });
          foodResults.appendChild(card);
        });
      } catch(error) { foodResults.innerHTML = `<p>Error al obtener los datos: ${error}</p>`; }
      foodForm.reset();
    });
  </script>
</body>
</html>
